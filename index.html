<!-- Minimalist Dark Dashboard for Old iPad (iOS 10 Compatible) -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>iPad Dashboard</title>
    <style>
        body {
            background:#0d0d0d;
            color:#fff;
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            margin:0;
            padding:20px;
        }
        .section {
            margin-bottom:25px;
            padding:15px;
            background:#1a1a1a;
            border-radius:10px;
        }
        h2 {
            margin-top:0;
            font-size:20px;
        }
        img.chart {
            width:100%;
            height:auto;
            border-radius:8px;
            margin-top:10px;
        }
        .todo-item, .vit-item {
            display:flex;
            align-items:center;
            margin:5px 0;
        }
        input[type="checkbox"] {
            margin-right:10px;
            width:20px;
            height:20px;
        }
        input.todo-text {
            flex:1;
            padding:5px;
            border-radius:6px;
            border:none;
            outline:none;
            margin-left:10px;
        }
        button {
            padding:8px 12px;
            border-radius:6px;
            border:none;
            background:#333;
            color:#fff;
            margin-top:10px;
        }
    </style>
</head>
<body>

<!-- Crypto Prices + Charts -->
<div class="section">
    <h2>Crypto</h2>
    <div id="prices">Loading...</div>

    <h3>BTC</h3>
    <img class="chart" id="btcChart" />

    <h3>ETH</h3>
    <img class="chart" id="ethChart" />

    <h3>SOL</h3>
    <img class="chart" id="solChart" />
</div>

<!-- Quote -->
<div class="section">
    <h2>Quote of the Day</h2>
    <div id="quote">Loading quote...</div>
</div>

<!-- Todo List -->
<div class="section">
    <h2>Toâ€‘Do</h2>
    <div id="todoList"></div>
    <button onclick="addTodo()">Add task</button>
</div>

<!-- Vitamins / Pills Tracker -->
<div class="section">
    <h2>Vitamins</h2>
    <div class="vit-item"><input type="checkbox" id="vitA">Vitamin A</div>
    <div class="vit-item"><input type="checkbox" id="vitB">Vitamin B</div>
    <div class="vit-item"><input type="checkbox" id="vitC">Vitamin C</div>
</div>

<script>
// ---- Load Crypto Prices (XHR for iOS 10) ----
function loadPrices() {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', 'https://api.coinlore.net/api/tickers/?start=0&limit=10');
    xhr.onload = function() {
        if (xhr.status === 200) {
            var data = JSON.parse(xhr.responseText).data;
            var btc = findCoin(data, 'Bitcoin');
            var eth = findCoin(data, 'Ethereum');
            var sol = findCoin(data, 'Solana');

            document.getElementById('prices').innerHTML =
                'BTC: $' + btc.price_usd + '<br>'+
                'ETH: $' + eth.price_usd + '<br>'+
                'SOL: $' + sol.price_usd;
        }
    };
    xhr.send();
}

function findCoin(list, name){
    for (var i = 0; i < list.length; i++) {
        if (list[i].name === name) return list[i];
    }
    return {};    
}

// ---- Load SVG Charts ----
function loadCharts(){
    document.getElementById('btcChart').src = 'https://www.coingecko.com/coins/1/sparkline.svg?'+Date.now();
    document.getElementById('ethChart').src = 'https://www.coingecko.com/coins/279/sparkline.svg?'+Date.now();
    document.getElementById('solChart').src = 'https://www.coingecko.com/coins/4128/sparkline.svg?'+Date.now();
}

// ---- Quote ----
function loadQuote() {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', 'https://api.quotable.io/random');
    xhr.onload = function() {
        if (xhr.status === 200) {
            var q = JSON.parse(xhr.responseText);
            document.getElementById('quote').innerHTML = q.content;
        }
    };
    xhr.send();
}

// ---- Todo List ----
var todos = JSON.parse(localStorage.getItem('todos') || '[]');

function renderTodos() {
    var box = document.getElementById('todoList');
    box.innerHTML = '';
    for (var i=0;i<todos.length;i++){
        var item = document.createElement('div');
        item.className = 'todo-item';
        item.innerHTML = '<input type="checkbox" '+(todos[i].done?'checked':'')+' onclick="toggleTodo('+i+')">' +
                         '<input class="todo-text" value="'+todos[i].text+'" oninput="editTodo('+i+', this.value)">';
        box.appendChild(item);
    }
}

function addTodo(){
    todos.push({text:'New task', done:false});
    saveTodos();
}
function toggleTodo(i){ todos[i].done = !todos[i].done; saveTodos(); }
function editTodo(i, val){ todos[i].text = val; saveTodos(); }
function saveTodos(){ localStorage.setItem('todos', JSON.stringify(todos)); renderTodos(); }

// ---- Vitamins ----
var vitList = ['vitA','vitB','vitC'];
function saveVits(){
    var st = {};
    for (var i=0;i<vitList.length;i++){
        var id = vitList[i];
        st[id] = document.getElementById(id).checked;
    }
    localStorage.setItem('vits', JSON.stringify(st));
}
function loadVits(){
    var st = JSON.parse(localStorage.getItem('vits')||'{}');
    for (var key in st){
        if (document.getElementById(key)){
            document.getElementById(key).checked = st[key];
        }
    }
    for (var i=0;i<vitList.length;i++){
        document.getElementById(vitList[i]).onchange = saveVits;
    }
}

// ---- Init ----
loadPrices();
loadCharts();
loadQuote();
renderTodos();
loadVits();

setInterval(loadPrices, 15000);
setInterval(loadCharts, 15000);
setInterval(loadQuote, 60000);
</script>

</body>
</html>
